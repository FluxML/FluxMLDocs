<!DOCTYPE ><HTML><head><script charset="utf-8" src="../../../../assets/default/multidoc_injector.js" type="text/javascript"></script><script charset="utf-8" type="text/javascript">window.MULTIDOCUMENTER_ROOT_PATH = '/'</script><script charset="utf-8" src="../../../../assets/default/flexsearch.bundle.js" type="text/javascript"></script><script charset="utf-8" src="../../../../assets/default/flexsearch_integration.js" type="text/javascript"></script><title>DataAugmentation.jl</title><script src="../../template/highlight.min.js"></script><script src="../../template/julia.min.js"></script><script src="../../template/loadhighlightjs.js"></script><link href="../../template/ansi.css" rel="stylesheet"/><link href="../../template/hugobook.css" rel="stylesheet"/><meta charset="utf-8" content="Type=text/html;" http-equiv="Content-Type"/><meta content="width=device-width," initial-scale="1" name="viewport"/><link href="../../../../assets/default/multidoc.css" rel="stylesheet" type="text/css"/><link href="../../../../assets/default/flexsearch.css" rel="stylesheet" type="text/css"/></head><body><nav id="multi-page-nav"><div class="hidden-on-mobile" id="nav-items"><a class="nav-link nav-item" href="../../../../flux/">Flux</a><div class="nav-dropdown"><button class="nav-item dropdown-label">Building Blocks</button><div class="nav-dropdown-container nav-mega-dropdown-container"><div class="nav-mega-column"><div class="column-header">Neural Network primitives</div><ul class="column-content"><a class="nav-link nav-item" href="../../../../nnlib/">NNlib</a><a class="nav-link nav-item" href="../../../../functors/">Functors</a></ul></div><div class="nav-mega-column"><div class="column-header">Automatic differentiation libraries</div><ul class="column-content"><a class="nav-link nav-item" href="../../../../zygote/">Zygote</a></ul></div><div class="nav-mega-column"><div class="column-header">Neural Network primitives</div><ul class="column-content"><a class="nav-link nav-item" href="../../../../nnlib/">NNlib</a></ul></div></div></div><div class="nav-dropdown"><button class="nav-item dropdown-label">Training</button><div class="nav-dropdown-container nav-mega-dropdown-container"><div class="nav-mega-column"><div class="column-header">Data Wrangling</div><ul class="column-content"><a class="nav-link nav-item" href="../../../../mlutils/">MLUtils</a><a class="nav-link nav-item" href="../../../../onehotarrays/">OneHotArrays</a></ul></div><div class="nav-mega-column"><div class="column-header">Data Augmentation</div><ul class="column-content"><a class="nav-link active nav-item" href="../../../">DataAugmentation</a></ul></div><div class="nav-mega-column"><div class="column-header">Datasets</div><ul class="column-content"><a class="nav-link nav-item" href="../../../../mldatasets/">MLDatasets</a></ul></div><div class="nav-mega-column"><div class="column-header">Schedulers</div><ul class="column-content"><a class="nav-link nav-item" href="../../../../paramschedulers/dev/">ParameterSchedulers</a></ul></div></div></div><div class="nav-dropdown"><button class="nav-item dropdown-label">Models</button><div class="nav-dropdown-container nav-mega-dropdown-container"><div class="nav-mega-column"><div class="column-header">Computer Vision</div><ul class="column-content"><a class="nav-link nav-item" href="../../../../metalhead/">Metalhead</a></ul></div><div class="nav-mega-column"><div class="column-header">Natural Language Processing</div><ul class="column-content"><a class="nav-link nav-item" href="../../../../transformers/">Transformers</a></ul></div></div></div><div class="search nav-item"><input id="search-input" placeholder="Search..."/><ul class="suggestions hidden" id="search-result-container"></ul><div class="search-keybinding">/</div></div></div><button id="multidoc-toggler"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg></button></nav><input class="hidden" id="menu-control" onclick="toggleMenu()" toggle="" type="checkbox"/><input class="hidden" id="toc-control" toggle="" type="checkbox"/><main class="container" flex=""><aside class="book-menu" id="menu-container"><nav class="book-menu-content"><h2 id="title">DataAugmentation.jl</h2><div id="sidebar"><div class="doctree"><ul><li><p>User guide (TODO)</p><ul><li><p><a href="quickstart.md.html" title="">Quickstart</a></p></li></ul></li><li><p>Library</p><ul><li><p><a href="intro.md.html" title="">Introduction</a></p></li><li><p><a href="iteminterface.md.html" title="">Item interface</a></p></li><li><p><a href="tfminterface.md.html" title="">Transformation interface</a></p></li><li><p><a href="buffering.md.html" title="">Buffering</a></p></li><li><p>Projective transformations</p><ul><li><p><a href="projective/intro.md.html" title="">Introduction</a></p></li><li><p><a href="projective/interface.md.html" title="">Interface</a></p></li><li><p><a href="projective/data.md.html" title="">Spatial data</a></p></li><li><p><a href="projective/usage.md.html" title="">Usage</a></p></li><li><p><a href="projective/gallery.md.html" title="">Gallery</a></p></li></ul></li><li><p><a href="preprocessing.md.html" title="">Preprocessing</a></p></li><li><p><a href="stochastic.md.html" title="">Stochastic transformations</a></p></li><li><p><a href="colortransforms.md.html" title="">Color transformations</a></p></li></ul></li><li><p><a href="../../REFERENCE.html" title="">Reference</a></p></li></ul></div></div></nav></aside><div class="book-page"><header class="book-header"></header><article><h1 id="dataaugmentationjl">DataAugmentation.jl</h1><p>This library provides data transformations for machine and deep learning. At the moment, it focuses on spatial data (think images, keypoint data and masks), but that is owed only to my current work. The extensible abstractions should fit other domains as well.</p><p>For the most part, the transformations themselves are not very complex. The challenge this library tackles is to reconcile an easy-to-use, composable interface with performant execution.</p><p>The key abstractions are <code>Transform</code>s, the transformation to apply, and <code>Item</code>s which contain the data to be transformed. <a href="../../REFERENCE/DataAugmentation.apply.html"><code>apply</code></a><code>(tfm, item)</code>, as the name gives away, applies a transformation to an item.  For example, given an <a href="../../REFERENCE/DataAugmentation.Image.html"><code>Image</code></a> item, we can resize it with the <a href="../../REFERENCE/DataAugmentation.CenterResizeCrop.html"><code>CenterResizeCrop</code></a> transformation.</p><pre lang="julia"><code>item = Image(image)
tfm = CenterResizeCrop((128, 128))
apply(tfm, item)
</code></pre><h2 id="requirements">Requirements</h2><p>The above example is simple, but there are more requirements of data augmentation pipelines that this library adresses. They serve as a motivation to the interface I’ve arrived at for defining transformations.</p><h3 id="stochasticity">Stochasticity</h3><p>A transformation is stochastic (as opposed to deterministic) if it produces different outputs based on some random state.<br/><br/>This randomness can become a problem when applying an transformation to an aligned pair of input and target. If we have an image and a corresponding segmentation mask, using different scaling factors results in misalignment of the two; the segmentation no longer matches up with the image pixels.</p><p>To handle this, the random state is explicitly passed to the transformations, rendering them deterministic. A generator for the random state can be defined with <a href="../../REFERENCE/DataAugmentation.getrandstate.html"><code>DataAugmentation.getrandstate</code></a><code>(tfm)</code> and passed to <code>apply</code> with the <code>randstate</code> keyword argument.</p><h3 id="composition">Composition</h3><p>Most data augmentation pipelines are made up of multiple steps: augmenting an image can mean resizing, randomly rotating, cropping and then normalizing the values. So applying transformations one after another – sequencing – is one way to compose transformations. But some operations, like affine transformations, can also be <em>fused</em>, resulting in a single transformation that is more performant and produces more accurate results.</p><h3 id="buffering">Buffering</h3><p>Since data augmentation pipelines often run on large amounts of data, performance can often be improved by using prealloacted output buffers for the transformations. This results in fewer memory allocations and less garbage collection which both take time.</p><hr/><p>Let’s next see how these requirements are reflected in the <a href="./iteminterface.md.html" title="">item</a> and <a href="./tfminterface.md.html" title="">transformation</a> interfaces.</p></article><footer class="book-footer"></footer></div><aside class="book-toc"><nav class="book-toc-content" id="toc"><ul><li><a href="#dataaugmentationjl">DataAugmentation.jl</a><ul><li><a href="#requirements">Requirements</a><ul><li><a href="#stochasticity">Stochasticity</a><ul></ul></li><li><a href="#composition">Composition</a><ul></ul></li><li><a href="#buffering">Buffering</a><ul></ul></li></ul></li></ul></li></ul></nav></aside></main></body></HTML>