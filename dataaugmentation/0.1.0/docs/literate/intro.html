<!DOCTYPE html><HTML lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><script charset="utf-8" src="../../../../assets/default/multidoc_injector.js" type="text/javascript"></script><script charset="utf-8" type="text/javascript">window.MULTIDOCUMENTER_ROOT_PATH = '/'</script><script charset="utf-8" src="../../../../assets/default/flexsearch.bundle.js" type="text/javascript"></script><script charset="utf-8" src="../../../../assets/default/flexsearch_integration.js" type="text/javascript"></script><meta charset="utf-8"/><meta content="Publish.jl" name="generator"/><meta content="width=device-width, initial-scale=1" name="viewport"/><meta content="" name="keywords"/><title>DataAugmentation.jl</title><link href="../../normalize.css" rel="stylesheet"/><link href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" rel="stylesheet"/><link href="../../tabulator_simple.min.css" rel="stylesheet"/><link href="../../publish.css" rel="stylesheet"/><link href="../../default.min.css" rel="stylesheet"/><link href="../../custom.css" rel="stylesheet"/><script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js"></script><script src="../../versions.js"></script><script src="../../lunr.js"></script><script src="../../highlight.min.js"></script><script src="../../tabulator.min.js"></script><script src="../../julia.min.js"></script><script src="../../julia-repl.min.js"></script><script src="../../publish.js"></script><link href="../../../../assets/default/multidoc.css" rel="stylesheet" type="text/css"/><link href="../../../../assets/default/flexsearch.css" rel="stylesheet" type="text/css"/></head><body><nav id="multi-page-nav"><div class="hidden-on-mobile" id="nav-items"><a class="nav-link nav-item" href="../../../../flux/">Flux</a><div class="nav-dropdown"><button class="nav-item dropdown-label">Building Blocks</button><div class="nav-dropdown-container nav-mega-dropdown-container"><div class="nav-mega-column"><div class="column-header">Neural Network primitives</div><ul class="column-content"><a class="nav-link nav-item" href="../../../../nnlib/">NNlib</a><a class="nav-link nav-item" href="../../../../functors/">Functors</a></ul></div><div class="nav-mega-column"><div class="column-header">Automatic differentiation libraries</div><ul class="column-content"><a class="nav-link nav-item" href="../../../../zygote/">Zygote</a></ul></div><div class="nav-mega-column"><div class="column-header">Neural Network primitives</div><ul class="column-content"><a class="nav-link nav-item" href="../../../../nnlib/">NNlib</a></ul></div></div></div><div class="nav-dropdown"><button class="nav-item dropdown-label">Training</button><div class="nav-dropdown-container nav-mega-dropdown-container"><div class="nav-mega-column"><div class="column-header">Data Wrangling</div><ul class="column-content"><a class="nav-link nav-item" href="../../../../mlutils/">MLUtils</a><a class="nav-link nav-item" href="../../../../onehotarrays/">OneHotArrays</a></ul></div><div class="nav-mega-column"><div class="column-header">Data Augmentation</div><ul class="column-content"><a class="nav-link active nav-item" href="../../../">DataAugmentation</a></ul></div><div class="nav-mega-column"><div class="column-header">Datasets</div><ul class="column-content"><a class="nav-link nav-item" href="../../../../mldatasets/">MLDatasets</a></ul></div><div class="nav-mega-column"><div class="column-header">Schedulers</div><ul class="column-content"><a class="nav-link nav-item" href="../../../../paramschedulers/dev/">ParameterSchedulers</a></ul></div></div></div><div class="nav-dropdown"><button class="nav-item dropdown-label">Models</button><div class="nav-dropdown-container nav-mega-dropdown-container"><div class="nav-mega-column"><div class="column-header">Computer Vision</div><ul class="column-content"><a class="nav-link nav-item" href="../../../../metalhead/">Metalhead</a></ul></div><div class="nav-mega-column"><div class="column-header">Natural Language Processing</div><ul class="column-content"><a class="nav-link nav-item" href="../../../../transformers/">Transformers</a></ul></div></div></div><div class="search nav-item"><input id="search-input" placeholder="Search..."/><ul class="suggestions hidden" id="search-result-container"></ul><div class="search-keybinding">/</div></div></div><button id="multidoc-toggler"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg></button></nav><main id="page"><div class="menu"><div id="projectname">DataAugmentation.jl</div><input id="search-input" placeholder="Search"/><select id="version-selector"></select><svg fill="none" height="24" id="menu-toggler" onclick="toggleIndexPage();" title="Contents" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M2 6C2 5.44772 2.44772 5 3 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H3C2.44772 7 2 6.55228 2 6Z" fill="currentColor"></path><path d="M2 12.0322C2 11.4799 2.44772 11.0322 3 11.0322H21C21.5523 11.0322 22 11.4799 22 12.0322C22 12.5845 21.5523 13.0322 21 13.0322H3C2.44772 13.0322 2 12.5845 2 12.0322Z" fill="currentColor"></path><path d="M3 17.0645C2.44772 17.0645 2 17.5122 2 18.0645C2 18.6167 2.44772 19.0645 3 19.0645H21C21.5523 19.0645 22 18.6167 22 18.0645C22 17.5122 21.5523 17.0645 21 17.0645H3Z" fill="currentColor"></path></svg></div><div id="toc"><h2 id="user-guide-todo"><a class="anchor" href="../../#user-guide-todo"></a>User guide (TODO)</h2><h2 id="library"><a class="anchor" href="../../#library"></a>Library</h2><ul><li><a href="../../docs/literate/intro.html">Introduction</a></li><li><a href="../../docs/literate/iteminterface.html">Item interface</a></li><li><a href="../../docs/literate/tfminterface.html">Transformation interface</a></li><li><a href="../../docs/literate/buffering.html">Buffering</a></li></ul><h3 id="projective-transformations"><a class="anchor" href="../../#projective-transformations"></a>Projective transformations</h3><ul><li><a href="../../docs/literate/projective/intro.html">Introduction</a></li><li><a href="../../docs/literate/projective/interface.html">Interface</a></li><li><a href="../../docs/literate/projective/data.html">Spatial data</a></li><li><a href="../../docs/literate/projective/usage.html">Usage</a></li><li><a href="../../docs/literate/projective/gallery.html">Gallery</a></li></ul><h3 id="preprocessing"><a class="anchor" href="../../#preprocessing"></a>Preprocessing</h3><ul><li><a href="../../docs/literate/preprocessing.html">Overview</a></li></ul><h2 id="referencedocstringsmd"><a class="anchor" href="../../#referencedocstringsmd"></a><a href="../../docstrings.html">Reference</a></h2></div><article id="content"><h1 id="dataaugmentationjl"><a class="anchor" href="#dataaugmentationjl"></a>DataAugmentation.jl</h1><p>This library provides data transformations for machine and deep learning. At the moment, it focuses on spatial data (think images, keypoint data and masks), but that is owed only to my current work. The extensible abstractions should fit other domains as well.</p><p>For the most part, the transformations themselves are not very complex. The challenge this library tackles is to reconcile an easy-to-use, composable interface with performant execution.</p><p>The key abstractions are <code>Transform</code>s, the transformation to apply, and <code>Item</code>s which contain the data to be transformed. <a href="../../docstrings/DataAugmentation.apply.html"><code>apply</code></a><code>(tfm, item)</code>, as the name gives away, applies a transformation to an item.  For example, given an <a href="../../docstrings/DataAugmentation.Image.html"><code>Image</code></a> item, we can resize it with the <a href="../../docstrings/DataAugmentation.CenterResizeCrop.html"><code>CenterResizeCrop</code></a> transformation.</p><pre><code class="language-julia">item = Image(image)
tfm = CenterResizeCrop((128, 128))
apply(tfm, item)
</code></pre><h2 id="requirements"><a class="anchor" href="#requirements"></a>Requirements</h2><p>The above example is simple, but there are more requirements of data augmentation pipelines that this library adresses. They serve as a motivation to the interface I’ve arrived at for defining transformations.</p><h3 id="stochasticity"><a class="anchor" href="#stochasticity"></a>Stochasticity</h3><p>A transformation is stochastic (as opposed to deterministic) if it produces different outputs based on some random state.
This randomness can become a problem when applying an transformation to an aligned pair of input and target. If we have an image and a corresponding segmentation mask, using different scaling factors results in misalignment of the two; the segmentation no longer matches up with the image pixels.</p><p>To handle this, the random state is explicitly passed to the transformations, rendering them deterministic. A generator for the random state can be defined with <a href="../../docstrings/DataAugmentation.getrandstate.html"><code>getrandstate</code></a><code>(tfm)</code> and passed to <code>apply</code> with the <code>randstate</code> keyword argument.</p><h3 id="composition"><a class="anchor" href="#composition"></a>Composition</h3><p>Most data augmentation pipelines are made up of multiple steps: augmenting an image can mean resizing, randomly rotating, cropping and then normalizing the values. So applying transformations one after another – sequencing – is one way to compose transformations. But some operations, like affine transformations, can also be <em>fused</em>, resulting in a single transformation that is more performant and produces more accurate results.</p><h3 id="buffering"><a class="anchor" href="#buffering"></a>Buffering</h3><p>Since data augmentation pipelines often run on large amounts of data, performance can often be improved by using prealloacted output buffers for the transformations. This results in fewer memory allocations and less garbage collection which both take time.</p><hr/><p>Let’s next see how these requirements are reflected in the <a href="./iteminterface.html">item</a> and <a href="./tfminterface.html">transformation</a> interfaces.</p></article><div id="page-navigation"><a href="intro.html" id="previous-page" title="Previous"><svg fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M16.2426 6.34317L14.8284 4.92896L7.75739 12L14.8285 19.0711L16.2427 17.6569L10.5858 12L16.2426 6.34317Z" fill="currentColor"></path></svg></a><a href="iteminterface.html" id="next-page" title="Next"><svg fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M10.5858 6.34317L12 4.92896L19.0711 12L12 19.0711L10.5858 17.6569L16.2427 12L10.5858 6.34317Z" fill="currentColor"></path></svg></a></div><footer>
            Built with <a href="https://github.com/MichaelHatherly/Publish.jl" target="_blank">Publish.jl</a> and the <a href="https://julialang.org" target="_blank">Julia Language</a>.
        </footer></main><script>hljs.initHighlightingOnLoad();</script><script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "$", right: "$", display: false},
                    {left: "\\(", right: "\\)", display: false},
                    {left: "\\[", right: "\\]", display: true}
                ]
            });
        });
    </script></body></HTML>